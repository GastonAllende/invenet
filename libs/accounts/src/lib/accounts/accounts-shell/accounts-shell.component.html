<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<div class="accounts-shell-container">
  <div class="content">
    <lib-account-list
      [accounts]="accountsStore.entities()"
      [includeArchived]="includeArchived()"
      [isLoading]="accountsStore.isLoading()"
      (includeArchivedChange)="handleIncludeArchivedChange($event)"
      (accountSelected)="handleAccountSelected($event)"
      (create)="onCreateAccount()"
      (editClicked)="handleEditClicked($event)"
      (delete)="handleDeleteClicked($event)"
      (archiveClicked)="handleArchiveClicked($event)"
    ></lib-account-list>
  </div>

  <p-dialog
    [header]="selectedAccount() ? 'Edit Account' : 'Create Account'"
    [(visible)]="showFormDialog"
    [modal]="true"
    [closable]="true"
    [draggable]="false"
    [resizable]="false"
    [dismissableMask]="true"
    [style]="{ width: '500px' }"
  >
    <lib-invenet-account-form
      [account]="selectedAccount()"
      [mode]="selectedAccount() ? 'update' : 'create'"
      [isLoading]="accountsStore.isLoading()"
      (formSubmit)="onSaveAccount($event)"
      (formCancel)="onCancelForm()"
    ></lib-invenet-account-form>
  </p-dialog>

  @if (accountsStore.isLoading()) {
    <div class="loading-overlay">
      <i class="pi pi-spin pi-spinner"></i>
      <span>Loading...</span>
    </div>
  }
</div>
