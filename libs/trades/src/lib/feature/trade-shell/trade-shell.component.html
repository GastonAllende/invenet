<div class="trade-shell">
  <p-toast></p-toast>
  <p-confirmDialog></p-confirmDialog>

  @if (journalMode() === 'list') {
    <lib-trade-list
      [trades]="trades()"
      [isLoading]="isLoading()"
      [accounts]="accounts()"
      [strategies]="strategies()"
      [selectedAccountId]="activeAccountId()"
      [includeArchived]="includeArchived()"
      (filtersChange)="onFiltersChange($event)"
      (includeArchivedChange)="onIncludeArchivedChange($event)"
      (logFull)="onLogFull()"
      (quickLog)="onQuickLog()"
      (view)="onView($event)"
      (archive)="onArchive($event)"
      (unarchive)="onUnarchive($event)"
    ></lib-trade-list>
  }

  @if (journalMode() === 'new' || journalMode() === 'edit') {
    <lib-trade-form
      [mode]="journalMode() === 'edit' ? 'edit' : 'create'"
      [trade]="selectedTradeDetail()"
      [accounts]="accounts()"
      [defaultAccountId]="activeAccountId()"
      [strategies]="strategies()"
      [isLoading]="isLoading()"
      (save)="onSaveTrade($event)"
      (formCancel)="onCancelForm()"
    ></lib-trade-form>
  }

  @if (journalMode() === 'detail') {
    <lib-trade-detail
      [trade]="selectedTradeDetail()"
      (edit)="onEditFromDetail()"
      (archive)="onArchiveFromDetail()"
      (unarchive)="onUnarchiveFromDetail()"
      (back)="onBackToJournal()"
    ></lib-trade-detail>
  }
</div>
